
# 密码安全升级迁移指南

## 当前系统状态

✅ **已移除密码强度验证** - 用户可设置任意强度密码，仅检查非空  
✅ **保留密码加密功能** - 新密码使用BCrypt加密存储  
✅ **保留自动升级功能** - MD5密码登录时自动升级到BCrypt  

## 主要配置变更

### 新增配置（application.yml）
```yaml
poetize:
  security:
    password:
      # 部署场景：new-system | existing-system | migration-system
      deployment-scenario: existing-system
      
      # BCrypt加密强度（推荐12）
      bcrypt-strength: 12
      
      # 迁移截止时间（仅migration-system需要）
      # migration-end-time: "2025-12-31 23:59:59"
```

### 部署场景说明
- **new-system**: 新系统，完全禁用MD5
- **existing-system**: 现有系统，支持MD5自动升级
- **migration-system**: 计划迁移，有时间限制的MD5支持

## 迁移步骤

### 1.替换poetize-ui、poetize-server、py三个文件夹

### 2. 改配置文件

poetize-server/poetry-web/src/main/resources/application.yml

#### 安全模式选择，改成以下配置即可

```yaml
poetize:
  security:
    password:
      deployment-scenario: migration-system
      bcrypt-strength: 12
      # 迁移系统的MD5支持截止时间，可自定义
      migration-end-time: 2025-12-31 23:59:59
```

### 3. 重启系统(要在项目根目录下)
```bash
docker compose restart
```
