/* ========== 聊天室暗色模式样式 ========== */
/* 当 body 有 dark-mode 类时，应用以下样式 */

/* 暗色模式下的CSS变量覆盖 */
body.dark-mode {
    /* 背景色 */
    --background: #1a1a1a;
    --gradualBackground: linear-gradient(to right bottom, #994433, #993355, #116688, #118866);
    --gradualBlue: linear-gradient(to right, #116688, #118866);

    /* 字体颜色 */
    --fontColor: #e0e0e0;
    
    /* 边框颜色 */
    --borderColor: rgba(255, 255, 255, 0.2);
    --borderHoverColor: rgba(200, 200, 200, 0.4);

    /* 主题背景 */
    --themeBackground: #cc6600;
    --gradualRed: linear-gradient(to right, #cc3322, #cc3355);

    /* 水波纹 */
    --rippleColor: rgba(255, 255, 255, 0.3);
    
    /* 导航栏 */
    --toolbarFont: #e0e0e0;
    --toolbarBackground: rgba(30, 30, 30, 0.95);
    
    /* 灰色字体 */
    --greyFont: #999999;
    --maxGreyFont: #b0b0b0;
    --commentContent: #2d2d2d;
    
    /* 渐变背景 */
    --gradientBG: linear-gradient(-90deg, #994433, #993355, #116688, #118866);
    
    /* 遮罩 */
    --mask: rgba(0, 0, 0, 0.6);
    --whiteMask: rgba(255, 255, 255, 0.1);
    --maxWhiteMask: rgba(255, 255, 255, 0.15);
    --miniMask: rgba(0, 0, 0, 0.3);
    --miniWhiteMask: rgba(255, 255, 255, 0.05);
    --translucent: rgba(0, 0, 0, 0.7);
    --maxMask: rgba(0, 0, 0, 0.85);

    /* 白色/灰色 */
    --white: #2d2d2d;
    --maxWhite: #1e1e1e;
    --midWhite: #252525;

    /* 红色 */
    --red: #ff4444;
    --lightRed: #cc3322;
    --maxLightRed: #cc3355;
    --orangeRed: #cc5533;

    /* 蓝色 */
    --azure: #1a3a52;
    --blue: rgb(64, 158, 255);
    --messageColor: #2a4a5a;

    /* 聊天背景 */
    --imBG: #252525;

    /* 灰色 */
    --lowGray: #4a4a4a;
    --lightGray: #3a3a3a;
    --maxLightGray: #2a2a2a;
    --maxMaxLightGray: rgba(40, 40, 40, 0.5);

    /* 其他颜色 */
    --green: #67C23A;
    --black: #e0e0e0;
    --lightYellow: #4a3a2a;
}

/* ========== 聊天室主容器 ========== */
/* 保留背景图片，通过遮罩层实现暗色效果 */
body.dark-mode .friend-wrap {
    position: relative;
}

body.dark-mode .friend-wrap::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    pointer-events: none;
    z-index: 0;
}

/* 确保聊天框在遮罩层之上 */
body.dark-mode .friend-box {
    position: relative;
    z-index: 1;
    background-color: var(--white);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
}

/* ========== 侧边栏 ========== */
body.dark-mode .friend-aside {
    background-color: #1e1e1e;
    border-right-color: #3a3a3a;
}

body.dark-mode .friend-chat {
    color: #b0b0b0;
}

body.dark-mode .friend-chat:hover {
    color: #e0e0e0;
    background-color: rgba(255, 255, 255, 0.05);
}

body.dark-mode .aside-active {
    color: var(--blue) !important;
}

body.dark-mode .friend-set {
    color: #b0b0b0;
}

body.dark-mode .friend-set:hover {
    color: #e0e0e0;
}

/* ========== 搜索框 ========== */
body.dark-mode .im-input .n-input__border,
body.dark-mode .im-input .n-input__state-border {
    border-color: #3a3a3a !important;
}

body.dark-mode .im-input .n-input__border:hover,
body.dark-mode .im-input .n-input__state-border:hover {
    border-color: #4a4a4a !important;
}

/* ========== 左侧面板 ========== */
body.dark-mode .body-left {
    background-color: #1e1e1e;
    box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
}

/* ========== 聊天列表项 ========== */
body.dark-mode .im-user,
body.dark-mode .im-user-group {
    color: #e0e0e0;
}

body.dark-mode .im-user:hover,
body.dark-mode .im-user-group:hover {
    background-color: #252525;
}

body.dark-mode .im-active,
body.dark-mode .friend-active,
body.dark-mode .im-group {
    background-color: var(--imBG);
}

body.dark-mode .im-user-right {
    color: #e0e0e0;
}

body.dark-mode .im-down {
    color: var(--greyFont);
}

/* ========== 系统消息 ========== */
body.dark-mode .system-date {
    color: var(--greyFont);
}

body.dark-mode .system-content {
    background-color: var(--messageColor);
    color: #e0e0e0;
}

/* ========== 右侧内容区 ========== */
body.dark-mode .body-right {
    background-color: #1e1e1e; /* 稍微提亮，避免过于深黑 */
}

/* ========== 好友信息 ========== */
body.dark-mode .friend-info {
    color: #e0e0e0;
}

body.dark-mode .friend-label {
    color: var(--greyFont);
}

/* ========== 好友请求 ========== */
body.dark-mode .friend-request {
    background-color: var(--midWhite);
}

body.dark-mode .request-status {
    color: var(--greyFont);
}

/* ========== 弹出框 ========== */
body.dark-mode .n-modal {
    background-color: #2d2d2d;
}

body.dark-mode .email-wrap {
    background-color: #2d2d2d;
    color: #e0e0e0;
}

body.dark-mode .email-title {
    color: #e0e0e0;
}

body.dark-mode .weiyan-edit {
    background-color: var(--background);
}

/* ========== 随笔评论框 ========== */
body.dark-mode .comment-textarea {
    background-color: #2d2d2d !important;
    background-image: none !important;
    border-color: #4a4a4a !important;
    color: #e0e0e0 !important;
}

body.dark-mode .comment-textarea::placeholder {
    color: #8a8a8a !important;
}

body.dark-mode .comment-textarea:focus {
    border-color: var(--blue) !important;
}

body.dark-mode .comment-picture {
    background-color: #2d2d2d !important;
}

/* ========== 分割线 ========== */
body.dark-mode .n-divider {
    border-color: #3a3a3a;
    color: var(--greyFont);
}

body.dark-mode .body-left .n-divider .n-divider__title {
    color: var(--greyFont);
}

/* ========== 标签 ========== */
body.dark-mode .group-tag {
    background-color: var(--themeBackground);
    color: #ffffff;
}

/* ========== Naive UI 组件暗色模式适配 ========== */

/* 输入框 */
body.dark-mode .n-input {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
}

body.dark-mode .n-input .n-input__input-el,
body.dark-mode .n-input .n-input__textarea-el {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
}

body.dark-mode .n-input .n-input__input-el::placeholder,
body.dark-mode .n-input .n-input__textarea-el::placeholder {
    color: #8a8a8a !important;
}

body.dark-mode .n-input .n-input__border,
body.dark-mode .n-input .n-input__state-border {
    border-color: #4a4a4a !important;
}

body.dark-mode .n-input:hover .n-input__state-border {
    border-color: #5a5a5a !important;
}

body.dark-mode .n-input.n-input--focus .n-input__state-border {
    border-color: var(--blue) !important;
}

/* 按钮 */
body.dark-mode .n-button {
    background-color: #3a3a3a !important;
    color: #e0e0e0 !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .n-button:hover {
    background-color: #4a4a4a !important;
    border-color: #5a5a5a !important;
}

body.dark-mode .n-button--primary-type {
    background-color: var(--blue) !important;
    color: #ffffff !important;
}

body.dark-mode .n-button--primary-type:hover {
    background-color: #5a9eff !important;
}

body.dark-mode .n-button--error-type {
    background-color: #f56c6c !important;
    color: #ffffff !important;
}

body.dark-mode .n-button--error-type:hover {
    background-color: #f78989 !important;
}

body.dark-mode .n-button--info-type {
    background-color: #409eff !important;
    color: #ffffff !important;
}

body.dark-mode .n-button--info-type:hover {
    background-color: #66b1ff !important;
}

/* 卡片 */
body.dark-mode .n-card {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .n-card__header {
    background-color: #1a1a1a !important;
    border-bottom-color: #4a4a4a !important;
    color: #e0e0e0 !important;
}

/* 徽章 */
body.dark-mode .n-badge-sup {
    background-color: #f56c6c !important;
    color: #ffffff !important;
}

/* 抽屉 */
body.dark-mode .n-drawer {
    background-color: #2d2d2d !important;
}

body.dark-mode .n-drawer__header {
    background-color: #1a1a1a !important;
    border-bottom-color: #4a4a4a !important;
    color: #e0e0e0 !important;
}

body.dark-mode .n-drawer__content {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
}

/* 抽屉内容包裹容器 - 关键修复 */
body.dark-mode .n-drawer-content-wrapper {
    background-color: #1e1e1e !important;
    color: #e0e0e0 !important;
}

/* 抽屉内的卡片 */
body.dark-mode .n-drawer .n-card {
    background-color: #2d2d2d !important;
}

/* 抽屉内的文字 */
body.dark-mode .n-drawer-content-wrapper * {
    color: inherit;
}

/* 标签页 */
body.dark-mode .n-tabs .n-tabs-nav {
    background-color: #1a1a1a !important;
}

body.dark-mode .n-tabs .n-tabs-tab {
    color: #8a8a8a !important;
}

body.dark-mode .n-tabs .n-tabs-tab:hover {
    color: #e0e0e0 !important;
}

body.dark-mode .n-tabs .n-tabs-tab--active {
    color: var(--blue) !important;
}

body.dark-mode .n-tabs .n-tabs-tab-pad {
    background-color: #2d2d2d !important;
}

/* Popover */
body.dark-mode .n-popover {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
    border-color: #4a4a4a !important;
}

/* Dialog */
body.dark-mode .n-dialog {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
}

body.dark-mode .n-dialog__title {
    color: #e0e0e0 !important;
}

body.dark-mode .n-dialog__content {
    color: #e0e0e0 !important;
}

body.dark-mode .n-dialog__action {
    background-color: #2d2d2d !important;
}

body.dark-mode .n-dialog__icon {
    color: #e0e0e0 !important;
}

/* Dialog 带图标的类型 */
body.dark-mode .n-dialog--icon-left,
body.dark-mode .n-dialog--icon-top {
    background-color: #2d2d2d !important;
}

body.dark-mode .n-dialog--icon-left .n-dialog__icon,
body.dark-mode .n-dialog--icon-top .n-dialog__icon {
    color: var(--blue) !important;
}

/* Modal（弹窗）- 确保所有文字可见 */
body.dark-mode .n-modal {
    color: #e0e0e0 !important;
}

body.dark-mode .n-modal-body-wrapper {
    background-color: transparent !important;
}

body.dark-mode .n-modal-container {
    background-color: #2d2d2d !important;
}

/* Modal 内部的所有文字元素 */
body.dark-mode .n-modal div,
body.dark-mode .n-modal span,
body.dark-mode .n-modal p {
    color: inherit;
}

/* 确保遮罩层颜色正确 */
body.dark-mode .n-modal-mask {
    background-color: rgba(0, 0, 0, 0.7) !important;
}

/* 开关 */
body.dark-mode .n-switch {
    background-color: #3a3a3a !important;
}

body.dark-mode .n-switch.n-switch--active {
    background-color: var(--blue) !important;
}

/* 图片 */
body.dark-mode .n-image {
    background-color: #1a1a1a;
}

/* Popconfirm */
body.dark-mode .n-popconfirm {
    background-color: #2d2d2d !important;
    color: #e0e0e0 !important;
}

/* ========== Element Plus 组件暗色模式适配 ========== */

/* 单选按钮组 */
body.dark-mode .el-radio-group {
    color: #e0e0e0 !important;
}

body.dark-mode .el-radio-button__inner {
    background-color: #3a3a3a !important;
    color: #e0e0e0 !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .el-radio-button__inner:hover {
    color: var(--blue) !important;
}

body.dark-mode .el-radio-button__original-radio:checked + .el-radio-button__inner {
    background-color: var(--blue) !important;
    border-color: var(--blue) !important;
    color: #ffffff !important;
}

/* 上传组件 */
body.dark-mode .el-upload {
    background-color: #2d2d2d !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .el-upload:hover {
    border-color: var(--blue) !important;
}

body.dark-mode .el-upload-dragger {
    background-color: #2d2d2d !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .el-upload-dragger:hover {
    border-color: var(--blue) !important;
    background-color: #353535 !important;
}

/* 上传区域文字 - 提高可见度 */
body.dark-mode .el-upload__text {
    color: #b0b0b0 !important;
}

body.dark-mode .el-upload__text div {
    color: #e0e0e0 !important;
}

/* 上传提示文字 */
body.dark-mode .el-upload__tip {
    color: #b0b0b0 !important;
}

/* 确保上传区域的 SVG 图标可见 */
body.dark-mode .el-upload-dragger .el-upload__text svg {
    opacity: 0.9;
}

body.dark-mode .el-upload-list__item {
    background-color: #2d2d2d !important;
    border-color: #4a4a4a !important;
    color: #e0e0e0 !important;
}

body.dark-mode .el-upload-list__item-name {
    color: #e0e0e0 !important;
}

/* Element Plus 按钮 */
body.dark-mode .el-button {
    background-color: #3a3a3a !important;
    color: #e0e0e0 !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .el-button:hover {
    background-color: #4a4a4a !important;
    border-color: #5a5a5a !important;
}

body.dark-mode .el-button--primary {
    background-color: var(--blue) !important;
    border-color: var(--blue) !important;
    color: #ffffff !important;
}

body.dark-mode .el-button--primary:hover {
    background-color: #66b1ff !important;
    border-color: #66b1ff !important;
}

body.dark-mode .el-button--success {
    background-color: #67c23a !important;
    border-color: #67c23a !important;
    color: #ffffff !important;
}

body.dark-mode .el-button--success:hover {
    background-color: #85ce61 !important;
    border-color: #85ce61 !important;
}

/* ========== 消息提示 ========== */
body.dark-mode .el-message {
    background-color: #2d2d2d !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .el-message * {
    color: #e0e0e0 !important;
}

body.dark-mode .el-message--success {
    background: linear-gradient(135deg, #1e4620, #2a6b2c) !important;
}

body.dark-mode .el-message--warning {
    background: var(--gradientBG) !important;
}

body.dark-mode .el-message--error {
    background: var(--gradualRed) !important;
}

/* ========== 聊天消息 ========== */
body.dark-mode .message {
    color: #e0e0e0;
}

body.dark-mode .message img {
    border: 1px solid #4a4a4a;
}

/* ========== 图片预览 ========== */
body.dark-mode #outerImg {
    background: rgba(0, 0, 0, 0.85);
}

/* ========== 移动端返回按钮 ========== */
body.dark-mode .mobile-back-btn {
    color: var(--blue);
}

body.dark-mode .mobile-back-btn:hover {
    background-color: var(--lightGray);
}

body.dark-mode .mobile-back-btn:active {
    background-color: var(--imBG);
}

/* ========== 滚动条 ========== */
body.dark-mode .friend-box ::-webkit-scrollbar-thumb {
    background-color: #4a4a4a;
}

body.dark-mode .friend-box ::-webkit-scrollbar-track {
    background-color: #2d2d2d;
}

body.dark-mode .treeHole-wrap::-webkit-scrollbar-thumb {
    background-color: #4a4a4a;
}

body.dark-mode .treeHole-wrap::-webkit-scrollbar-track {
    background-color: #2d2d2d;
}

/* ========== 朋友圈 ========== */
body.dark-mode .friend-model {
    background-color: var(--background);
}

body.dark-mode .pagination-wrap {
    background-color: transparent;
}

/* 朋友圈空状态 */
body.dark-mode .empty-state {
    color: #e0e0e0;
}

body.dark-mode .empty-text {
    color: #e0e0e0;
}

body.dark-mode .empty-hint {
    color: var(--greyFont);
}

/* 随笔气泡框 - 保持黑色文字以适配彩色背景 */
body.dark-mode .tree-hole-box {
    color: #1f1f1f !important;
}

body.dark-mode .my-content {
    color: #1f1f1f !important;
}

body.dark-mode .tree-hole-box > div:last-child {
    color: #666666 !important;
    border-top-color: rgba(0, 0, 0, 0.2) !important;
}

/* 随笔悬停效果 - 暗色模式下使用浅色阴影 */
body.dark-mode .tree-hole-box:hover,
body.dark-mode .avatar-img:hover {
    box-shadow: 0 0 16px 3px rgba(255, 255, 255, 0.3) !important;
}

/* ========== 响应式适配 ========== */
@media screen and (max-width: 850px) {
    body.dark-mode .friend-box {
        background-color: #1e1e1e; /* 与桌面端保持一致，避免过黑 */
    }
    
    body.dark-mode .body-left {
        background-color: #1e1e1e;
        box-shadow: 2px 0 8px rgba(0, 0, 0, 0.5);
    }
    
    body.dark-mode .body-right {
        background-color: #1e1e1e; /* 与桌面端保持一致 */
    }
}

/* ========== 聊天组件暗色模式 ========== */
/* 聊天标题栏 */
body.dark-mode .chat-header {
    background-color: var(--maxWhite);
    color: #e0e0e0;
}

body.dark-mode .chat-title {
    color: #e0e0e0;
}

body.dark-mode .online-count {
    color: var(--greyFont);
}

/* 聊天消息容器 */
body.dark-mode .msg-container {
    background-color: var(--midWhite);
}

/* 消息气泡 */
body.dark-mode .message {
    color: #e0e0e0;
}

body.dark-mode .message-left .message {
    background-color: #3a3a3a;
}

body.dark-mode .message-left .message::before {
    border-color: #3a3a3a #3a3a3a transparent transparent;
}

body.dark-mode .message-right .message {
    background-color: var(--messageColor);
}

body.dark-mode .message-right .message::before {
    border-color: var(--messageColor) transparent transparent var(--messageColor);
}

body.dark-mode .msg-date,
body.dark-mode .msg-user {
    color: var(--greyFont);
}

/* 聊天输入框区域 */
body.dark-mode .chat-input-area {
    background-color: #1e1e1e;
}

/* 输入框本身 */
body.dark-mode .message-content {
    background-color: #2d2d2d;
    color: #e0e0e0;
    caret-color: #e0e0e0;
}

body.dark-mode .message-content::placeholder {
    color: #8a8a8a;
}

/* 功能按钮区域 */
body.dark-mode .myEmoji {
    opacity: 0.8;
}

body.dark-mode .myEmoji:hover {
    opacity: 1;
}

/* 发送按钮区域 */
body.dark-mode .message-send {
    color: #e0e0e0;
}

/* 表情选择器 */
body.dark-mode .emoji-body {
    background-color: #2d2d2d;
    border: 1px solid #4a4a4a;
}

body.dark-mode .emoji-item:hover {
    background-color: #3a3a3a;
}

/* 图片列表 */
body.dark-mode .image-list {
    background-color: #2d2d2d;
    border: 1px solid #4a4a4a;
}

/* 上传图片弹窗 */
body.dark-mode .n-modal .message-content {
    background-color: #2d2d2d;
}

/* ========== 移动端长按反馈暗色模式 ========== */
@media (max-width: 768px) {
    body.dark-mode .im-user:active {
        background-color: rgba(255, 255, 255, 0.08);
    }
}

/* ========== 删除按钮暗色模式 ========== */
body.dark-mode .chat-item-delete {
    background-color: rgba(255, 71, 87, 0.2);
}

body.dark-mode .chat-item-delete:hover {
    background-color: rgba(255, 71, 87, 0.3);
}

/* ========== PC端右键菜单提示暗色模式 - 只在聊天列表中显示 ========== */
@media (min-width: 769px) {
    body.dark-mode .im-user-current::after,
    body.dark-mode .im-group-current::after {
        color: var(--greyFont);
    }
}

