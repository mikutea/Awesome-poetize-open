# 删除文章点赞功能说明

## 修改概述

本次更新移除了文章的点赞功能，但保留了评论、微言、家庭等其他模块的点赞功能。

## 前端修改

### 1. 删除点赞显示
- **文章详情页** (`poetize-ui/src/components/article.vue`)
  - 移除文章信息中的点赞图标和点赞数显示

- **文章列表页** (`poetize-ui/src/components/articleList.vue`)
  - 移除文章卡片中的点赞数显示

- **分类文章页** (`poetize-ui/src/components/common/sortArticle.vue`)
  - 移除文章卡片中的点赞数显示

### 2. 后台管理页面
- **文章管理** (`poetize-ui/src/components/admin/postList.vue`)
  - 移除文章列表中的"点赞数"列
  - 新增"查看"按钮，支持跳转到文章详情页

- **示例数据** (`poetize-ui/src/components/admin/webEdit.vue`)
  - 移除API文档示例中的likeCount字段

## 后端修改

### 1. Java实体类和VO
- **Article.java** (`poetize-server/poetry-web/src/main/java/com/ld/poetry/entity/Article.java`)
  - 移除likeCount字段及其注解

- **ArticleVO.java** (`poetize-server/poetry-web/src/main/java/com/ld/poetry/vo/ArticleVO.java`)
  - 移除likeCount字段

### 2. MyBatis映射
- **ArticleMapper.xml** (`poetize-server/poetry-web/src/main/resources/mapper/ArticleMapper.xml`)
  - 移除ResultMap中的like_count映射
  - 移除Base_Column_List中的like_count字段

### 3. 业务逻辑
- **ArticleServiceImpl.java** (`poetize-server/poetry-web/src/main/java/com/ld/poetry/service/impl/ArticleServiceImpl.java`)
  - 更新热度计算算法：
    - 删除点赞数相关的计算逻辑
    - 重新调整权重分配：浏览量60%、评论数30%、时间因素10%
    - 移除互动比率中的点赞率计算
  - 移除查询中的likeCount字段

## 数据库修改

### 1. 迁移脚本
创建新的数据库迁移脚本 `202511010001.sql`：
```sql
ALTER TABLE `poetize`.`article` DROP COLUMN IF EXISTS `like_count`;
```

### 2. 表结构文件
- **poetry.sql** - 移除article表中的like_count字段定义
- **poetry_old.sql** - 移除article表中的like_count字段定义

## 使用说明

### 数据库迁移
对于已有数据库，请执行以下SQL脚本：
```bash
mysql -u用户名 -p密码 < poetize-server/sql/202511010001.sql
```

### 注意事项
1. 本次修改仅删除文章(article表)的点赞功能
2. 评论(comment表)、微言(wei_yan表)、家庭(family表)的点赞功能保持不变
3. 文章热度排序算法已自动调整，不依赖点赞数

## 影响范围
- ✅ 文章点赞功能已完全移除
- ✅ 文章热度计算已优化
- ✅ 其他模块的点赞功能不受影响
- ✅ 数据库向后兼容（使用IF EXISTS确保安全）

